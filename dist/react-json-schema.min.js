"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t){if(Object.prototype.hasOwnProperty.call(t,o)){e[o]=t[o]}}}return e};var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}return function(n,t,o){if(t)e(n.prototype,t);if(o)e(n,o);return n}}();var _react=require("react");function _classCallCheck(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}var componentMapCollection=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(n){var t=null;var o=null;if(Object.prototype.toString.call(n)==="[object Array]"){o=this.parseSubSchemas(n)}else{t=this.createComponent(n)}return t||o}},{key:"parseSubSchemas",value:function e(){var n=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var o=[];var r=0;Object.keys(t).forEach(function(e){var a=t[e];a.key=typeof a.key!=="undefined"?a.key:r;o.push(n.parseSchema(a));r++});return o}},{key:"createComponent",value:function e(n){var t=_extends({},n);delete t.component;delete t.children;delete t.text;var o=this.resolveComponent(n);var r=typeof n.text!=="undefined"?n.text:this.resolveComponentChildren(n);return(0,_react.createElement)(o,t,r)}},{key:"resolveComponent",value:function e(n){var t=this.getComponentMap();var o=null;if(n.hasOwnProperty("component")){if(n.component===Object(n.component)){o=n.component}else if(t&&t[n.component]){o=t[n.component]}else if(_react.DOM.hasOwnProperty(n.component)){o=n.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component \n          attribute in the schema.")}return o}},{key:"resolveComponentChildren",value:function e(n){return n.hasOwnProperty("children")?this.parseSchema(n.children):[]}},{key:"getComponentMap",value:function e(){return componentMapCollection.get(this)}},{key:"setComponentMap",value:function e(n){componentMapCollection.set(this,n)}}]);return e}();exports.default=ReactJsonSchema;