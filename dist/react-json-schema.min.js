"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var _react=require("react");var _reactDomFactories=require("react-dom-factories");var _reactDomFactories2=_interopRequireDefault(_reactDomFactories);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var componentMapCollection=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(t){var n=null;var r=null;if(Array.isArray(t)){r=this.parseSubSchemas(t)}else if(t){n=this.createComponent(t)}return n||r}},{key:"parseSubSchemas",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var r=[];var o=0;Object.keys(n).forEach(function(e){var a=n[e];a.key=typeof a.key!=="undefined"?a.key:o;r.push(t.parseSchema(a));o++});return r}},{key:"createComponent",value:function e(t){var n=t.component,r=t.children,o=t.text,a=_objectWithoutProperties(t,["component","children","text"]);var c=this.resolveComponent(t);var i=typeof o!=="undefined"?o:this.resolveComponentChildren(t);return(0,_react.createElement)(c,a,i)}},{key:"resolveComponent",value:function e(t){var n=this.getComponentMap();var r=null;if(t.hasOwnProperty("component")){if(t.component===Object(t.component)){r=t.component}else if(n&&n[t.component]){r=n[t.component]}else if(_reactDomFactories2.default.hasOwnProperty(t.component)){r=t.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component \n          attribute in the schema.")}return r}},{key:"resolveComponentChildren",value:function e(t){return t.hasOwnProperty("children")?this.parseSchema(t.children):undefined}},{key:"getComponentMap",value:function e(){return componentMapCollection.get(this)}},{key:"setComponentMap",value:function e(t){componentMapCollection.set(this,t)}}]);return e}();exports.default=ReactJsonSchema;