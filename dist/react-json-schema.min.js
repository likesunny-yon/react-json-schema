"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}return function(n,t,o){if(t)e(n.prototype,t);if(o)e(n,o);return n}}();var _react=require("react");function _objectWithoutProperties(e,n){var t={};for(var o in e){if(n.indexOf(o)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,o))continue;t[o]=e[o]}return t}function _classCallCheck(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}var componentMapCollection=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(n){var t=null;var o=null;if(Array.isArray(n)){o=this.parseSubSchemas(n)}else{t=this.createComponent(n)}return t||o}},{key:"parseSubSchemas",value:function e(){var n=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var o=[];var r=0;Object.keys(t).forEach(function(e){var a=t[e];a.key=typeof a.key!=="undefined"?a.key:r;o.push(n.parseSchema(a));r++});return o}},{key:"createComponent",value:function e(n){var t=n.component,o=n.children,r=n.text,a=_objectWithoutProperties(n,["component","children","text"]);var c=this.resolveComponent(n);var i=typeof r!=="undefined"?r:this.resolveComponentChildren(n);return(0,_react.createElement)(c,a,i)}},{key:"resolveComponent",value:function e(n){var t=this.getComponentMap();var o=null;if(n.hasOwnProperty("component")){if(n.component===Object(n.component)){o=n.component}else if(t&&t[n.component]){o=t[n.component]}else if(_react.DOM.hasOwnProperty(n.component)){o=n.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component \n          attribute in the schema.")}return o}},{key:"resolveComponentChildren",value:function e(n){return n.hasOwnProperty("children")?this.parseSchema(n.children):[]}},{key:"getComponentMap",value:function e(){return componentMapCollection.get(this)}},{key:"setComponentMap",value:function e(n){componentMapCollection.set(this,n)}}]);return e}();exports.default=ReactJsonSchema;